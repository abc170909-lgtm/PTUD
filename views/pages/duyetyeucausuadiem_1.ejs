<link rel="stylesheet" href="/css/DuyetYeuCauSuaDiem.css">

<section class="approve-section">
  <h2><%= title %></h2>
  <p>Xem xét và phê duyệt các yêu cầu sửa điểm từ giáo viên</p>

  <table id="requests-table">
    <thead>
      <tr>
        <th>#</th><th>Mã YC</th><th>Mã HS</th><th>Tên HS</th><th>Môn</th>
        <th>Loại điểm</th><th>Điểm cũ</th><th>Điểm mới</th>
        <th>Lý do</th><th>GV gửi</th><th>Trạng thái</th><th>Thao tác</th>
      </tr>
    </thead>
    <tbody>
      <% if(requests.length){ %>
        <% requests.forEach((r,i)=>{ %>
        <tr data-id="<%= r.MaYeuCau %>">
          <td><%= i+1 %></td>
          <td class="ma-yeu-cau"><%= r.MaYeuCau %></td>
          <td><%= r.MaHocSinh %></td>
          <td><%= r.TenHocSinh %></td>
          <td><%= r.TenMonHoc %></td>
          <td><%= r.LoaiDiem %></td>
          <td class="text-red"><%= r.DiemCu %></td>
          <td class="text-green"><%= r.DiemMoi %></td>
          <td><%= r.LyDo %></td>
          <td><%= r.TenGiaoVien %></td>
          <td><%= r.TrangThai %></td>
          <td>
            <% if(r.TrangThai==='Đang xử lý'){ %>
              <button class="view-btn">Xem chi tiết</button>
              <button class="approve-btn">✅ Duyệt</button>
              <button class="reject-btn">❌ Từ chối</button>
            <% } else { %>
              <em>Đã xử lý</em>
            <% } %>
          </td>
        </tr>
        <% }) %>
      <% } else { %>
        <tr><td colspan="12" style="text-align:center;">Không có yêu cầu</td></tr>
      <% } %>
    </tbody>
  </table>

  <!-- Modal -->
  <div id="detail-modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3>Chi tiết yêu cầu</h3>
      <div id="detail-content"></div>
    </div>
  </div>
</section>

<script src="/js/DuyetYeuCauSuaDiem.js"></script>
