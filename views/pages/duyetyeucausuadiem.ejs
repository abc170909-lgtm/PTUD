<section class="approve-section">
  <h2><%= title %></h2>
  <p>Xem xét và phê duyệt các yêu cầu sửa điểm từ giáo viên</p>

  <table id="requests-table">
    <thead>
      <tr>
        <th>#</th>
        <th>Học sinh</th>
        <th>Môn</th>
        <th>Loại điểm</th>
        <th>Điểm cũ</th>
        <th>Điểm mới</th>
        <th>Lý do</th>
        <th>Trạng thái</th>
        <th>Thao tác</th>
      </tr>
    </thead>
    <tbody>
      <% if (requests.length) { %>
        <% requests.forEach((r, i) => { %>
          <tr>
            <td><%= i + 1 %></td>
            <td><%= r.HoTen %></td>
            <td><%= r.TenMonHoc %></td>
            <td><%= r.LoaiDiem %></td>
            <td class="text-red"><%= r.DiemCu %></td>
            <td class="text-green"><%= r.DiemMoi %></td>
            <td><%= r.LyDo %></td>
            <td><%= r.TrangThai %></td>
            <td>
              <% if (r.TrangThai === 'Chờ duyệt') { %>
                <button class="approve-btn" data-id="<%= r.MaYeuCau %>">✅ Duyệt</button>
                <button class="reject-btn" data-id="<%= r.MaYeuCau %>">❌ Từ chối</button>
              <% } else { %>
                <em>Đã xử lý</em>
              <% } %>
            </td>
          </tr>
        <% }) %>
      <% } else { %>
        <tr><td colspan="9" style="text-align:center;">Không có yêu cầu cần duyệt</td></tr>
      <% } %>
    </tbody>
  </table>
</section>

<script src="/js/duyetyeucau.js"></script>
